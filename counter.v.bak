module counter(
	input BAUD,SEL,CLK,
	output reg [17:0] OUT
	);
	
	wire BAUD;
	
	baudGenerator bg1 (
		.CLK(CLK),
		.BAUD(BAUD)
	);
	
	OUT = (SEL==1'b0) ? 18'b0 : 18'b111111111111111111;
	
	always@(posedge BAUD)
		begin
			if (SEL==1'b0)	// Up counter
				begin
					if (OUT == 18'b111111111111111111)
						OUT <= 18'b0;
					else
						OUT <= OUT + 1'b1;
				end
			else
				begin
					if (OUT == 18'b0)
						OUT <= 18'b111111111111111111;
					else
						OUT <= OUT - 1'b1;
				end
		end
endmodule 